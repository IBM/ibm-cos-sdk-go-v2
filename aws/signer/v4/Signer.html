<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Struct: v4.Signer
  
    &mdash; IBM COS SDK for Go
  
</title>

  <link rel="stylesheet" href="../../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../../css/common.css" type="text/css" />

  <link rel="stylesheet" href="../../../css/highlight.github.css" type="text/css" />

<script type="text/javascript">
  pathId = "aws/signer/v4.Signer";
  relpath = '../../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../../package_list.html"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../../_index.html">Index (S)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../aws.html" title="aws (package)">aws</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../signer.html" title="signer (package)">signer</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../v4.html" title="v4 (package)">v4</a></span></span>
     &raquo; 
    <span class="title">Signer</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="package_list_link"
        href="../../../package_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <iframe id="search_frame"></iframe>

      <div id="content">
        <!--REGION_DISCLAIMER_DO_NOT_REMOVE-->
        <h1>Struct: v4.Signer
  
  
  
</h1>
<div class="package signature">
import "../ibm-cos-sdk-go-v2/aws/signer/v4"
</div>
<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Signer applies AWS v4 signing to given request. Use this to sign requests that need to be signed with AWS V4 Signatures.</p>


  </div>
</div>
<div class="tags">
  

</div>

  <h3 class="inherited">Implemented Interfaces</h3>
  <p class="inherited"><span class='object_link'><a href="../../../service/s3/types/AnalyticsFilter.html" title="types.AnalyticsFilter (interface)">types.AnalyticsFilter</a></span>, <span class='object_link'><a href="HTTPPresigner.html" title="v4.HTTPPresigner (interface)">v4.HTTPPresigner</a></span>, <span class='object_link'><a href="../../../service/s3/HTTPPresignerV4.html" title="s3.HTTPPresignerV4 (interface)">s3.HTTPPresignerV4</a></span>, <span class='object_link'><a href="HTTPSigner.html" title="v4.HTTPSigner (interface)">v4.HTTPSigner</a></span>, <span class='object_link'><a href="../../../service/s3/HTTPSignerV4.html" title="s3.HTTPSignerV4 (interface)">s3.HTTPSignerV4</a></span>, <span class='object_link'><a href="../../../service/kms/HTTPSignerV4.html" title="kms.HTTPSignerV4 (interface)">kms.HTTPSignerV4</a></span>, <span class='object_link'><a href="../../../service/s3/types/MetricsFilter.html" title="types.MetricsFilter (interface)">types.MetricsFilter</a></span>, <span class='object_link'><a href="../../../service/s3/PresignPost.html" title="s3.PresignPost (interface)">s3.PresignPost</a></span>, <span class='object_link'><a href="../../../service/internal/s3shared/arn/S3ObjectLambdaARN.html" title="arn.S3ObjectLambdaARN (interface)">arn.S3ObjectLambdaARN</a></span>, <span class='object_link'><a href="../../../service/s3/types/SelectObjectContentEventStream.html" title="types.SelectObjectContentEventStream (interface)">types.SelectObjectContentEventStream</a></span></p>


  

  









  
    <h2>
      Method  Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#SignHTTP-instance_method" title="v4.Signer.SignHTTP() (method)">func (s Signer) <strong>SignHTTP</strong>(ctx context.Context, credentials aws.Credentials, r *http.Request, payloadHash string, service string, region string, signingTime time.Time, optFns ...func(options *SignerOptions)) error </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>SignHTTP signs AWS v4 requests with the provided payload hash, service name, region the request is made to, and time the request is signed at.</p>
</div></span>
  
</li>


      
    </ul>
  





  <div id="Method_method_details" class="method_details_list">
    <h2>Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="SignHTTP-instance_method">
  
    func (s <span class='object_link'><a href="" title="v4.Signer (struct)">Signer</a></span>) <strong><span class='object_link'><a href="#SignHTTP-instance_method" title="v4.Signer.SignHTTP() (method)">SignHTTP</a></span></strong>(ctx context.Context, credentials <span class='object_link'><a href="../../Credentials.html" title="aws.Credentials (struct)">aws.Credentials</a></span>, r *http.Request, payloadHash string, service string, region string, signingTime time.Time, optFns ...func(options *<span class='object_link'><a href="../v4.html#type-SignerOptions" title="v4 (package)">SignerOptions</a></span>)) error 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>SignHTTP signs AWS v4 requests with the provided payload hash, service name, region the request is made to, and time the request is signed at. The signTime allows you to specify that a request is signed for the future, and cannot be used until then.</p>

<p>The payloadHash is the hex encoded SHA-256 hash of the request payload, and must be provided. Even if the request has no payload (aka body). If the request has no payload you should use the hex encoded SHA-256 of an empty string as the payloadHash value.</p>

<pre class="code go"><code class="go"><div class="hljs"><span class="hljs-string">"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"</span>
</div></code></pre>

<p>Some services such as Amazon S3 accept alternative values for the payload hash, such as “UNSIGNED-PAYLOAD” for requests where the body will not be included in the request signature.</p>

<p><a href="https://docs.aws.amazon.com/AmazonS3/latest/API/sig-v4-header-based-auth.html">docs.aws.amazon.com/AmazonS3/latest/API/sig-v4-header-based-auth.html</a></p>

<p>Sign differs from Presign in that it will sign the request using HTTP header values. This type of signing is intended for http.Request values that will not be shared, or are shared in a way the header values on the request will not be lost.</p>

<p>The passed in request will be modified in place.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'aws/signer/v4/v4.go', line 274</span>

<div class="hljs"><span class="hljs-keyword">func</span> (s Signer) SignHTTP(ctx context.Context, credentials aws.Credentials, r *http.Request, payloadHash <span class="hljs-constant">string</span>, service <span class="hljs-constant">string</span>, region <span class="hljs-constant">string</span>, signingTime time.Time, optFns ...<span class="hljs-keyword">func</span>(options *SignerOptions)) <span class="hljs-constant">error</span> {
	options := s.options

	<span class="hljs-keyword">for</span> _, fn := <span class="hljs-keyword">range</span> optFns {
		fn(&options)
	}

	signer := &httpSigner{
		Request:                r,
		PayloadHash:            payloadHash,
		ServiceName:            service,
		Region:                 region,
		Credentials:            credentials,
		Time:                   v4Internal.NewSigningTime(signingTime.UTC()),
		DisableHeaderHoisting:  options.DisableHeaderHoisting,
		DisableURIPathEscaping: options.DisableURIPathEscaping,
		DisableSessionToken:    options.DisableSessionToken,
		KeyDerivator:           s.keyDerivator,
	}

	<span class="hljs-keyword">if</span> ibmIam.IBMProvider.IsValid(credentials.Source) {
		ibmSigner := ibmiam.NewIBMCOSSigner(ibmiam.WithLogger(options.Logger))
		err := ibmSigner.SignHTTP(ctx, credentials, r, payloadHash, service, region, signingTime)
		<span class="hljs-keyword">if</span> err != <span class="hljs-constant">nil</span> {
			<span class="hljs-keyword">return</span> fmt.Errorf(<span class="hljs-string">"signing failed: %w"</span>, err)
		}
		<span class="hljs-keyword">return</span> <span class="hljs-constant">nil</span>
	}

	signedRequest, err := signer.Build()
	<span class="hljs-keyword">if</span> err != <span class="hljs-constant">nil</span> {
		<span class="hljs-keyword">return</span> err
	}

	logSigningInfo(ctx, options, &signedRequest, <span class="hljs-constant">false</span>)

	<span class="hljs-keyword">return</span> <span class="hljs-constant">nil</span>
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
  </div>


      </div>

      <div id="footer">
  Generated on Mon Jan 12 07:20:50 2026 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.38 (ruby-3.1.2).
</div>

<!-- BEGIN-SECTION -->
<script type="text/javascript" src="https://media.amazonwebservices.com/amznUrchin.js"></script>
<!-- SiteCatalyst code version: H.25.2. Copyright 1996-2012 Adobe, Inc. All Rights Reserved.
More info available at http://www.omniture.com -->
<script language="JavaScript" type="text/javascript" src="https://media.amazonwebservices.com/js/sitecatalyst/s_code.min.js">
</script>
<script language="JavaScript" type="text/javascript">
  <!--
  s.prop66='AWS SDK for Go';
  s.eVar66='D=c66';
  s.prop65='API Reference';
  s.eVar65='D=c65';
  var s_code=s.t();if(s_code)document.write(s_code)
  //-->
</script>
<script language="JavaScript" type="text/javascript">
  <!--if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
  //-->
</script>
<noscript>
  <img src="http://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="">
</noscript>
<!--/DO NOT REMOVE/-->
<!-- End SiteCatalyst code version: H.25.2. -->
<!-- END-SECTION -->

    </div>
  </body>
</html>
